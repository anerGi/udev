<% Puppet::Parser::Functions.autoloader.loadall %>
# This file was generated by puppet
# ANY CHANGES TO THIS FILE WILL BE OVERWRITTEN
# This file was automatically generated by the /lib/udev/write_net_rules
# program, run by the persistent-net-generator.rules rules file.
#
# You can modify it, as long as you keep each rule on a single
# line, and change only the value of the NAME= key.

# PCI device 0x15ad:0x07b0 (vmxnet3)

<% index_count=0 -%>
<% array_interfaces=interfaces.split(',').select{ |e| e =~ /eth\d*/ }.sort_by{|s| s.scan(/\d+/).map{|s| s.to_i}} -%>
<% array_interfaces.each do |interface| -%>
<% this_interface = scope.lookupvar("::macaddress_#{interface}") -%>
SUBSYSTEM=="net", ACTION=="add", DRIVERS=="?*", ATTR{address}=="<%= this_interface -%>", ATTR{type}=="1", KERNEL=="eth*", NAME="<%= interface.gsub(/[\d*]/, index_count.to_s) -%>"
<% udev_hash = { "#{interface.gsub(/[\d*]/, index_count.to_s)}" => { "originaldevice" => "#{interface}" } } -%>
<% scope.function_create_resources('udev::ifcfg', udev_hash) %>
<% index_count+=1 -%>
<% end -%>
